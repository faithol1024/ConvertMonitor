{"title":"Suggestion Engine Dashboard (cloned)","description":"","widgets":[{"id":2335563469953466,"definition":{"title":"GQL","type":"group","layout_type":"ordered","widgets":[{"id":1119338699323762,"definition":{"title":"GQL Per Service Latency","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:gql_per_service_latency.95percentile{service:promosuggestion,$environment,$datacenter}","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":6138774786962046,"definition":{"title":"GQL Per Service Error Rate","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:gql_per_service_error_rate{service:promosuggestion}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5962534623875780,"definition":{"title":"GQL Per Service Call Rate","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:gql_per_service_call_rate{service:promosuggestion}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}}]}},{"id":7687722913491134,"definition":{"title":"[GRPC] Get Suggestion Promo","type":"group","layout_type":"ordered","widgets":[{"id":4695073647399108,"definition":{"title":"[GRPC] Get Suggestion Promo Attempt","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:grpc.suggestion_engine.get_suggestion_promo.attempt{$environment,$datacenter}.as_count()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":2960733929684312,"definition":{"title":"[GRPC] Get Suggestion Promo RPS","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:grpc.suggestion_engine.get_suggestion_promo.attempt{$environment,$datacenter}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7943724147007560,"definition":{"title":"[GRPC] Get Suggestion Promo Success Rate","type":"query_value","requests":[{"q":"(sum:grpc.suggestion_engine.get_suggestion_promo.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:grpc.suggestion_engine.get_suggestion_promo.attempt{$environment,$datacenter}.as_count())*100","aggregator":"sum","conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":2406709383485422,"definition":{"title":"[GRPC] Get Suggestion Promo Response Time","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"max:grpc.suggestion_engine.get_suggestion_promo.process_time.max{$environment,$datacenter} by {host}","data_source":"metrics","name":"query1"},{"query":"avg:grpc.suggestion_engine.get_suggestion_promo.process_time.95percentile{$environment,$datacenter} by {host}","data_source":"metrics","name":"query2"}],"style":{"palette":"orange","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":7275082696103170,"definition":{"title":"[GRPC] Get Suggestion Promo Error Status","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_suggestion_promo.attempt{$environment,$datacenter} by {is_success,error_code,detail}.as_count(), 10, 'sum', 'desc')"}]}}]}},{"id":2380080335585850,"definition":{"title":"[GRPC] Get Promo Logistic","type":"group","layout_type":"ordered","widgets":[{"id":6,"definition":{"title":"[GRPC] Get Promo Logistic Attempt vs Success","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter,is_success:true}.as_count()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter,is_success:false}.as_count()","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":7,"definition":{"title":"[GRPC] Get Promo Logistic Success Rate","type":"query_value","requests":[{"q":"(sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter}.as_count())*100","aggregator":"sum","conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":10,"definition":{"title":"[GRPC] Get Promo Logistic Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:grpc.suggestion_engine.get_promo_logistic.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.suggestion_engine.get_promo_logistic.process_time.max{$environment,$datacenter}","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":4,"definition":{"title":"[GRPC] Get Promo Logistic Status Message","type":"query_table","requests":[{"q":"sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter} by {statusmessage}.as_count()","aggregator":"sum","limit":25,"order":"desc","alias":"Count"}]}},{"id":8483034340215876,"definition":{"title":"[GRPC] Get Promo Logistic Error Status","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter} by {is_success,error_code}.as_count(), 10, 'sum', 'desc')"}]}},{"id":8936158446678448,"definition":{"title":"[RPS] Get Promo Logistic","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter}.as_rate()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":3790856289243286,"definition":{"title":"[GRPC] get_promo_suggestion_list Error Status","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_suggestion_list.attempt{$environment,$datacenter} by {is_success,error_code}.as_count(), 10, 'sum', 'desc')"}]}},{"id":1019674983768930,"definition":{"title":"[GRPC] get_promo_suggestion_list Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:grpc.suggestion_engine.get_promo_suggestion_list.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.suggestion_engine.get_promo_suggestion_list.process_time.max{$environment,$datacenter}","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":7111990835409544,"definition":{"title":"[GRPC] Get Promo Logistic Suggested Promo","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter,is_success:true} by {code}.as_count(), 10, 'sum', 'desc')","style":{"palette":"dog_classic"}}]}},{"id":4973236484263686,"definition":{"title":"[GRPC] Get Promo Logistic Sum by Hots","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter} by {host}.as_count(), 10, 'sum', 'desc')"}]}},{"id":8835015413722662,"definition":{"title":"[GRPC] Get Promo Logistic Sum by Hots","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter} by {host}.as_count(), 10, 'sum', 'desc')"}]}},{"id":6946534709162262,"definition":{"title":"[GRPC][raka delete soon] Get Promo Logistic Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:grpc.suggestion_engine.get_promo_logistic.process_time.max{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.suggestion_engine.get_promo_logistic.process_time.max{$environment,$datacenter}","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.suggestion_engine.get_promo_logistic.attempt{$environment,$datacenter}.as_count()","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}}]}},{"id":3469122791190544,"definition":{"title":"[GRPC] Get Promo Logistic Bulk","type":"group","layout_type":"ordered","widgets":[{"id":9,"definition":{"title":"[GRPC] Get Promo Logistic BULK RPS","show_legend":false,"legend_size":"0","legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter}.as_rate()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":8,"definition":{"title":"Get Promo Logistic BULK Rate","type":"query_value","requests":[{"q":"(sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter}.as_count())*100","aggregator":"sum","conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":794163894155894,"definition":{"title":"[GRPC] Get Promo Logistic Bulk Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:grpc.suggestion_engine.get_promo_logistic_bulk.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.suggestion_engine.get_promo_logistic_bulk.process_time.max{$environment,$datacenter}","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5,"definition":{"title":"[GRPC] Get Promo Logistic BULK Status Message","type":"query_table","requests":[{"q":"sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter} by {statusmessage}.as_count()","aggregator":"sum","limit":25,"order":"desc","alias":"Count"}]}},{"id":3320913180188966,"definition":{"title":"[GRPC] Get Promo Logistic BULK Error Status","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter} by {is_success,error_code,detail}.as_count(), 10, 'sum', 'desc')"}]}},{"id":128628541966194,"definition":{"title":"[RPS] [GRPC] Get Promo Logistic BULK","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter}.as_rate()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":204054567600870,"definition":{"title":"[GRPC] Get Promo Logistic BULK Suggested Promo","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter,is_success:true} by {code}.as_count(), 10, 'sum', 'desc')","style":{"palette":"dog_classic"}}]}},{"id":8591403004923758,"definition":{"title":"Sum of grpc.suggestion_engine.get_promo_logistic_bulk.attempt over env:produc...","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"(sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter}.as_count())*100","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":5885240800996594,"definition":{"title":"[GRPC] Get Promo Logistic BULK Attempt","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:grpc.suggestion_engine.get_promo_logistic_bulk.attempt{$environment,$datacenter}.as_count()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}}]}},{"id":2979679606673520,"definition":{"title":"Clear Cache BBO Tag","type":"group","layout_type":"ordered","widgets":[{"id":8216290259058502,"definition":{"title":"Clear Cache BBO Tag","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:http.promosuggestion.handle_clear_cache_bebas_ongkir_order_tag.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:http.promosuggestion.handle_clear_cache_bebas_ongkir_order_tag.process_time.max{$environment,$datacenter}","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":3902854151055490,"definition":{"title":"Clear Cache BBO Tag Rate","type":"query_value","requests":[{"q":"(sum:http.promosuggestion.handle_clear_cache_bebas_ongkir_order_tag.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:http.promosuggestion.handle_clear_cache_bebas_ongkir_order_tag.attempt{$environment,$datacenter}.as_count())*100","aggregator":"sum","conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}]}],"autoscale":true,"custom_unit":"%","precision":1}}]}},{"id":3154643437117102,"definition":{"title":"[GRPC] Get Prioritized Promo Suggestion","type":"group","show_title":true,"layout_type":"ordered","widgets":[{"id":6145550155565886,"definition":{"title":"[STAGING][GRPC] Get Prioritized Promo Suggestion Attempt","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"","formula":"query1"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:grpc.suggestion_engine.get_prioritized_promo_suggestion.attempt{*}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":6832472852324200,"definition":{"title":"[STAGING][GRPC] Get Prioritized Promo Suggestion Success Rate","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"comparator":">=","palette":"white_on_green","value":95},{"comparator":"<","palette":"white_on_red","value":95}],"response_format":"scalar","queries":[{"query":"sum:grpc.suggestion_engine.get_prioritized_promo_suggestion.attempt{is_success:true}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:grpc.suggestion_engine.get_prioritized_promo_suggestion.attempt{*}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":7761381378183574,"definition":{"title":"[STAGING][GRPC] Get Prioritized Promo Suggestion Response Time","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"response_format":"timeseries","queries":[{"query":"max:grpc.suggestion_engine.get_prioritized_promo_suggestion.process_time.max{*}","data_source":"metrics","name":"query1"},{"query":"avg:grpc.suggestion_engine.get_prioritized_promo_suggestion.process_time.95percentile{*}","data_source":"metrics","name":"query2"}],"style":{"palette":"orange","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":5636153300817366,"definition":{"title":"[STAGING][GRPC] Get Prioritized Promo Suggestion Status","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:grpc.suggestion_engine.get_prioritized_promo_suggestion.attempt{*} by {is_success,error_code,detail}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]}}]}},{"id":5355558801242632,"definition":{"title":"Cache Group","type":"group","layout_type":"ordered","widgets":[{"id":4821281385819268,"definition":{"title":"Save Cache Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:http.promosuggestion.handle_save_cache.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:http.promosuggestion.handle_save_cache.process_time.max{$environment,$datacenter}","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":2767708849563566,"definition":{"title":"Save Cache Success Rate","type":"query_value","requests":[{"q":"(sum:http.promosuggestion.handle_save_cache.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:http.promosuggestion.handle_save_cache.attempt{$environment,$datacenter}.as_count())*100","aggregator":"sum","conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":3890015265655194,"definition":{"title":"Get Cache Success Rate","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"sum:http.promosuggestion.handle_get_cache.attempt{$environment,$datacenter,is_success:true}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:http.promosuggestion.handle_get_cache.attempt{$environment,$datacenter}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":747337290861980,"definition":{"title":"Save Clear Status","type":"toplist","requests":[{"q":"top(sum:http.promosuggestion.handle_save_cache.attempt{$environment,$datacenter} by {is_success,error_code}.as_count(), 10, 'sum', 'desc')"}]}},{"id":8801721307947700,"definition":{"title":"[GRPC] Clear Cache Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:grpc.promosuggestion.handle_clear_cache.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.promosuggestion.handle_clear_cache.process_time.max{$environment,$datacenter}","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":4195597133144865,"definition":{"title":"Get Cache Success Rate","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:http.promosuggestion.handle_get_cache.attempt{$environment,$datacenter} by {is_success}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]}}]}},{"id":5431052270840462,"definition":{"title":"Promo History Save","type":"group","layout_type":"ordered","widgets":[{"id":8995071518935110,"definition":{"title":"Save Promo History Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:grpc.suggestion_engine.save_promo_history.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.suggestion_engine.save_promo_history.process_time.max{$environment,$datacenter}","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":5648289620376486,"definition":{"title":"Save Promo History Rate","type":"query_value","requests":[{"q":"(sum:grpc.suggestion_engine.save_promo_history.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:grpc.suggestion_engine.save_promo_history.attempt{$environment,$datacenter}.as_count())*100","aggregator":"sum","conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":6706318270012298,"definition":{"title":"Save Promo History Status","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.save_promo_history.attempt{$environment,$datacenter} by {is_success,error_code}.as_count(), 10, 'sum', 'desc')"}]}},{"id":6043971405776450,"definition":{"title":"Save Promo History Status","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.save_promo_history.attempt{$environment,$datacenter} by {is_success,error_code}.as_count(), 10, 'sum', 'desc')"}]}}]}},{"id":4157464672701244,"definition":{"title":"Promo History Get","type":"group","layout_type":"ordered","widgets":[{"id":714069212001718,"definition":{"title":"Get Promo History Response Time","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:grpc.suggestion_engine.get_promo_history.process_time.95percentile{$environment,$datacenter}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"max:grpc.suggestion_engine.get_promo_history.process_time.max{$environment,$datacenter}","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"}}},{"id":575315837838840,"definition":{"title":"Get Promo History Rate","type":"query_value","requests":[{"q":"(sum:grpc.suggestion_engine.get_promo_history.attempt{$environment,$datacenter,is_success:true}.as_count()/sum:grpc.suggestion_engine.get_promo_history.attempt{$environment,$datacenter}.as_count())*100","aggregator":"sum","conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":2989707746780056,"definition":{"title":"Get Promo History Status","type":"toplist","requests":[{"q":"top(sum:grpc.suggestion_engine.get_promo_history.attempt{$environment,$datacenter} by {is_success,error_code}.as_count(), 10, 'sum', 'desc')"}]}}]}},{"id":6372543497587498,"definition":{"title":"CampaignEngine","type":"group","layout_type":"ordered","widgets":[{"id":588106335731226,"definition":{"title":"[HTTP] GetPromoDataByCode Response Time","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:thirdparty.http.campaign_engine.getPromoDataByCode.process_time.95percentile{$environment,$datacenter}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:thirdparty.http.campaign_engine.getPromoDataByCode.process_time.max{$environment,$datacenter}","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1300292486453068,"definition":{"title":"[HTTP] GetPromoDataByCode Status","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:thirdparty.http.campaign_engine.getPromoDataByCode.attempt{$environment,$datacenter} by {is_success,error_code,detail}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]}},{"id":727436389749720,"definition":{"title":"[HTTP] GetPromoDataByCode Rate","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"sum:thirdparty.http.campaign_engine.getPromoDataByCode.attempt{is_success:true,$environment,$datacenter}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:thirdparty.http.campaign_engine.getPromoDataByCode.attempt{$environment,$datacenter}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"%","precision":1}},{"id":6119197878875820,"definition":{"title":"[HTTP] Validate Promo Stacking Logistic Response Time","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:thirdparty.http.campaign_engine.validatePromoStackingLogistic.process_time.95percentile{$environment,$datacenter}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:thirdparty.http.campaign_engine.validatePromoStackingLogistic.process_time.max{$environment,$datacenter}","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":3207252390308242,"definition":{"title":"[HTTP] Validate Promo Stacking Logistic Status","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:thirdparty.http.campaign_engine.validatePromoStackingLogistic.attempt{$environment,$datacenter} by {is_success,error_code,detail}","data_source":"metrics","name":"query1","aggregator":"sum"}]}]}},{"id":6173416314915776,"definition":{"title":"[HTTP] Validate Promo Stacking Logistic Success Rate","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"sum:thirdparty.http.campaign_engine.validatePromoStackingLogistic.attempt{is_success:true,$environment,$datacenter}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:thirdparty.http.campaign_engine.validatePromoStackingLogistic.attempt{$environment,$datacenter}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"%","precision":1}}]}},{"id":2430237661910266,"definition":{"title":"GetPromoSuggestionDetail","type":"group","background_color":"vivid_pink","show_title":true,"layout_type":"ordered","widgets":[{"id":4550741675021126,"definition":{"title":"[grpc] GetPromoSuggestionDetail Response Time","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:grpc.suggestion_engine.get_promo_suggestion_detail.process_time.95percentile{$environment,$datacenter}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:grpc.suggestion_engine.get_promo_suggestion_detail.process_time.max{$environment,$datacenter}","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]}},{"id":1169907102336848,"definition":{"title":"[grpc] GetPromoSuggestionDetail Status","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:grpc.suggestion_engine.get_promo_suggestion_detail.attempt{$environment,$datacenter} by {is_success,error_code,detail}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}]}},{"id":2122675498567558,"definition":{"title":"[grpc] GetPromoSuggestionDetail Rate","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":90},{"comparator":"<","palette":"white_on_red","value":90}],"response_format":"scalar","queries":[{"query":"sum:grpc.suggestion_engine.get_promo_suggestion_detail.attempt{is_success:true,$environment,$datacenter}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:grpc.suggestion_engine.get_promo_suggestion_detail.attempt{$environment,$datacenter}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"%","precision":1}}]}},{"id":2163414697434714,"definition":{"title":"Call Wrapper","type":"group","layout_type":"ordered","widgets":[{"id":7318261117784634,"definition":{"title":"Response Time 95%","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"avg:tdk.dependency_call.95percentile{source_name:suggestion-engine,$environment,$datacenter} by {usecase}"}]}},{"id":3318510690841110,"definition":{"title":"Response Time Max","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"max:tdk.dependency_call.max{source_name:suggestion-engine,$environment,$datacenter} by {usecase}"}]}},{"id":6753876609420652,"definition":{"title":"Status Success False Breakdown with Result","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(sum:tdk.dependency_call.count{source_name:suggestion-engine,$environment,$datacenter,success:false} by {handler,result}.as_count(), 10, 'sum', 'desc')"}]}},{"id":752142694228,"definition":{"title":"Success False by Use Cases","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(sum:tdk.dependency_call.count{source_name:suggestion-engine,$environment,$datacenter,success:false} by {handler,usecase}.as_count(), 10, 'sum', 'desc')"}]}},{"id":3914349422123254,"definition":{"title":"Success TRUE by Destination","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(sum:tdk.dependency_call.count{source_name:suggestion-engine,$environment,$datacenter,success:true} by {handler,usecase}.as_count(), 10, 'sum', 'desc')"}]}}]}}],"template_variables":[{"name":"environment","default":"*","prefix":"env","available_values":[]},{"name":"datacenter","default":"*","prefix":"datacenter","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"auto","id":"23t-wtw-2p5"}